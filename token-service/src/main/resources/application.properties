spring.application.name                                                     = token-service
server.port                                                                 = 8080
server.shutdown                                                             = graceful
server.servlet.context-path                                                 = /ecs/token-service

# PostgreSQL Configuration
spring.datasource.driver-class-name                                         = org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.database                                                         = POSTGRESQL
spring.jpa.database-platform                                                = org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto                                               = validate
spring.jpa.show-sql                                                         = false
spring.jpa.properties.hibernate.format_sql                                  = true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation            = true
spring.jpa.properties.hibernate.jdbc.batch_size                             = 1000
spring.jpa.properties.hibernate.order_inserts                               = true
spring.jpa.properties.hibernate.order_updates                               = true
spring.jpa.open-in-view                                                     = false

# Connection Pool (HikariCP - default in Spring Boot)
spring.datasource.hikari.connection-timeout                                 = 20000
spring.datasource.hikari.maximum-pool-size                                  = 10
spring.datasource.hikari.minimum-idle                                       = 5
spring.datasource.hikari.idle-timeout                                       = 300000
spring.datasource.hikari.max-lifetime                                       = 1200000
spring.datasource.hikari.auto-commit                                        = true
spring.datasource.hikari.pool-name                                          = TokenServiceHikariCP

# Flyway Configuration
spring.flyway.enabled                                                       = true
spring.flyway.locations                                                     = classpath:db/migration
spring.flyway.baseline-on-migrate                                           = true
spring.flyway.baseline-version                                              = 0
spring.flyway.out-of-order                                                  = false
spring.flyway.validate-on-migrate                                           = true
spring.flyway.clean-disabled                                                = true
spring.flyway.schemas                                                       = token-service
spring.flyway.table                                                         = flyway_schema_history

# Logging Configuration
logging.level.root                                                          = INFO
logging.level.com.ecs.token_service                                         = INFO
logging.level.org.springframework.web                                       = INFO
logging.level.org.springframework.jdbc.core                                 = INFO
logging.level.org.hibernate.SQL                                             = INFO
logging.level.org.hibernate.type.descriptor.sql.BasicBinder                 = INFO
logging.level.org.flywaydb                                                  = INFO

# Log file configuration
logging.file.name                                                           = logs/token-service.log
logging.logback.rollingpolicy.max-file-size                                 = 10MB
logging.logback.rollingpolicy.max-history                                   = 30
logging.pattern.console                                                     = %d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file                                                        = %d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Jackson Configuration
spring.jackson.serialization.write-dates-as-timestamps                      = false
spring.jackson.time-zone                                                    = UTC
spring.jackson.default-property-inclusion                                   = non_null

# Actuator Metrics for Performance
management.metrics.enable.jvm                                               = true
management.metrics.enable.process                                           = true
management.metrics.enable.system                                            = true
management.metrics.enable.tomcat                                            = true
management.metrics.enable.logback                                           = true
management.metrics.enable.hikaricp                                          = true
management.metrics.distribution.minimum-expected-value.http.server.requests = 1ms
management.metrics.distribution.maximum-expected-value.http.server.requests = 10s